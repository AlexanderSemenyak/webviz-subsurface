<html>
<head>
<meta charset="UTF-8"> 
<link rel="stylesheet" href="./assets/webviz_doc.css">

<!-- Also update package-lock.json with highlight.js version number: -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" integrity="sha256-sNPiigbfSkqUzMc5rgrdztLnneCMAp6W9wetJUZu9Zw=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/languages/yaml.min.js" integrity="sha256-GuL67zsJWO0bMHHaASSslF37TSgnQF5fuL2n80/HpoU=" crossorigin="anonymous"></script>

<script>hljs.initHighlightingOnLoad();</script>

</head>

<body>

<div class='container'>

<h1>Webviz configuration guide</h1>

<h2>Fundamental configuration</h2>

A configuration consists of some mandatory properties (title, username,
password) and one or more pages. Each page has a title, and potentially some
content. The content can be one or more items.

Containers represent predefined content, which takes one or more arguments.
A list and description of all available different containers is listed below.

Content which is not containers are interpreted as text paragraphs.

A basic example configuration is shown below.

<pre><code class='yaml'># This file demonstrates the most basic usage of webviz in a FMU setting
# The configuration files uses YAML (https://en.wikipedia.org/wiki/YAML).

title: Reek Webviz Demonstration

pages:

 - title: Front page
   content:
    - container: BannerImage
      image: ./example_banner.png
      title: My banner image
    - Webviz created from configuration file.
    - Some other text, potentially with strange letters like &#197;re, Sm&#248;rbukk S&#248;r.

 - title: Markdown example
   content:
    - container: Markdown
      markdown_file: ./example-markdown.md

 - title: Table example
   content:
    - container: DataTable
      csv_file: ./example_data.csv

 - title: PDF example
   content:
    - container: EmbedPdf
      pdf_file: ./example.pdf

 - title: Syntax highlighting example
   content:
    - container: SyntaxHighlighter
      filename: ./basic_example.yaml

 - title: Tour example
   content:
    - container: ExampleTour

 - title: Plot a table
   content:
    - container: TablePlotter
      csv_file: ./example_data.csv
      filter_cols:
          - Well
          - Segment
          - Average permeability (D)
      contact_person:
        name: Ola Nordmann
        phone: +47 12345678
        email: some@email.com

 - title: Plot a table (locked)
   content:
    - container: TablePlotter
      csv_file: ./example_data.csv
      lock: true
      plot_options:
        x: Well
        y: Initial reservoir pressure (bar)
        size: Average permeability (D)
        facet_col: Segment
      contact_person:
        name: Kari Nordmann
        phone: 12345678
        email: someother@email.com
</code></pre>

<h2>Container documentation</h2><h3><em>Basic containers</em></h3>
<p>These are the basic Webviz configuration containers, distributed through
the utility itself.</p><div style='margin-left: 40px;'>

<h3>Banner image</h3>
<p>This container adds a full width <em>banner image</em>, with an optional overlayed
title. Useful on e.g. the front page for introducing a field or project.</p>
<ul>
<li><code>image</code>: Path to the picture you want to add. Either absolute path or
  relative to the configuration file.</li>
<li><code>title</code>: Title which will be overlayed over the banner image.</li>
<li><code>color</code>: Color to be used for the font.</li>
<li><code>shadow</code>: Set to <code>False</code> if you do not want text shadow for the title.</li>
<li><code>height</code>: Height of the banner image (in pixels).</li>
</ul>
<pre><code class='yaml'>  - container: BannerImage
    image: some value
    title:   # Optional (default value shown here).
    color: white  # Optional (default value shown here).
    shadow: True  # Optional (default value shown here).
    height: 300  # Optional (default value shown here).
</code></pre>
<hr>


<h3>Data table</h3>
<p>This container adds a table to the webviz instance, using tabular data from
a provided csv file. If feature is requested, the data could also come from
a database.</p>
<ul>
<li><code>csv_file</code>: Path to the csv file containing the tabular data. Either absolute
              path or relative to the configuration file.</li>
<li><code>sorting</code>: If <code>True</code>, the table can be sorted interactively based
             on data in the individual columns.</li>
<li><code>filtering</code>: If <code>True</code>, the table can be filtered based on values in the
               individual columns.</li>
<li><code>pagination</code>: If <code>True</code>, only a subset of the table is displayed at once.
                Different subsets can be viewed from 'previous/next' buttons</li>
</ul>
<pre><code class='yaml'>  - container: DataTable
    csv_file: some value
    sorting: True  # Optional (default value shown here).
    filtering: True  # Optional (default value shown here).
    pagination: True  # Optional (default value shown here).
</code></pre>
<hr>


<h3>Embed PDF file</h3>
<p>This container embeds a given PDF file into the page.</p>
<ul>
<li><code>pdf_file</code>: Path to the PDF file to include. Either absolute path or
  relative to the configuration file.</li>
<li><code>height</code>: Height of the PDF object (in percent of viewport height).</li>
<li><code>width</code>: Width of the PDF object (in percent of available space).</li>
</ul>
<p><em>Note</em>: Webviz does not scan your PDF for malicious code.
Make sure it comes from a trusted source.</p>
<pre><code class='yaml'>  - container: EmbedPdf
    pdf_file: some value
    height: 80  # Optional (default value shown here).
    width: 100  # Optional (default value shown here).
</code></pre>
<hr>


<h3>Include Markdown</h3>
<p><em>Note:</em> The markdown syntax for images has been extended to support
(optionally) providing width and/or height for individual images.
To specify the dimensions write e.g.</p>
<pre><code class="markdown">![width=40%,height=300px](./example_banner.png &quot;Some caption&quot;)
</code></pre>

<p>This container renders and includes the content from a Markdown file. Images
are supported, and should in the markdown file be given as either relative
paths to the markdown file itself, or absolute paths.</p>
<ul>
<li><code>markdown_file</code>: Path to the markdown file to render and include. Either
  absolute path or relative to the configuration file.</li>
</ul>
<pre><code class='yaml'>  - container: Markdown
    markdown_file: some value
</code></pre>
<hr>


<h3>Syntax highlighter</h3>
<p>This container adds support for syntax highlighting of code. Language is
automatically detected.</p>
<ul>
<li><code>filename</code>: Path to a file containing the code to highlight.</li>
<li><code>dark_theme</code>: If <code>True</code>, the code is shown with a dark theme. Default is
                <code>False</code> giving a light theme.</li>
</ul>
<pre><code class='yaml'>  - container: SyntaxHighlighter
    filename: some value
    dark_theme: False  # Optional (default value shown here).
</code></pre>
<hr>


<h3>TablePlotter</h3>
<p>This container adds a plotter to the webviz instance, using tabular data from
a provided csv file. If feature is requested, the data could also come from
a database.</p>
<ul>
<li><code>csv_file</code>: Path to the csv file containing the tabular data. Either absolute
              path or relative to the configuration file.</li>
<li><code>plot_options</code>: A dictionary of plot options to initialize the plot with</li>
<li><code>lock</code>: If <code>True</code>, only the plot is shown, all dropdowns for changing
          plot options are hidden.</li>
</ul>
<pre><code class='yaml'>  - container: TablePlotter
    csv_file: some value
    plot_options: None  # Optional (default value shown here).
    filter_cols: None  # Optional (default value shown here).
    lock: False  # Optional (default value shown here).
</code></pre>
<hr>

</div><h3><em>Subsurface specific containers</em></h3>
<p>These are containers relevant within subsurface workflows. Most of them
rely on the setting <code>scratch_ensemble</code> configuration within the
<code>container_settings</code>.
I.e. you could have</p>
<pre><code class="yaml">title: Reek Webviz Demonstration
username: some_username
password: some_password

container_settings:
  scratch_ensembles:
    iter-0: /scratch/my_ensemble/realization-*/iter-0
    iter-1: /scratch/my_ensemble/realization-*/iter-1

pages:

 - title: Front page
   content:
    - container: SummaryStats
      ensemble: iter-0
</code></pre><div style='margin-left: 40px;'>

<h3>Disk usage</h3>
<p>This container adds functionality for standard visualization of disk usage in
FMU projects. It adds a dashboard element where the user can choose between
showing disk usage, per user, either as a pie chart or as a bar chart.</p>
<ul>
<li><code>scratch_dir</code>: Path to the directory you want to show disk usage for, e.g.
  <code>/scratch/fmu</code>.</li>
<li><code>title</code>: Optional title for the container.</li>
</ul>
<pre><code class='yaml'>  - container: DiskUsage
    scratch_dir: some value
</code></pre>
<hr>


<h3>History match</h3>
<p>This container visualizes the quality of the history match.</p>
<ul>
<li><code>ensembles</code>: List of the ensembles in <code>container_settings</code> to visualize.</li>
<li><code>observation_File</code>: Path to the observation <code>.yaml</code> file.</li>
<li><code>title</code>: Optional title for the container.</li>
</ul>
<pre><code class='yaml'>  - container: HistoryMatch
    ensembles: some value
    observation_file: some value
</code></pre>
<hr>


<h3>Volumetrics</h3>
<p>This container visualizes inplace volumetrics results from
FMU ensembles. Input can be given either as aggregated csv files
or as an ensemble name defined in 'container_settings' and csvfiles stored
per realizations.
In either case the csv files must follow FMU standards, that is it must have
one or more of the following columns:
'ZONE', 'REGION', 'FACIES', 'LICENSE' - these columns are used to filter the data.</p>
<p>Remaining columns are seen as volumetric responses. Any names are allowed,
but the following responses are given more descriptive names automatically:
"BULK_OIL": "Bulk Volume (Oil)"
"NET_OIL": "Net Volume (Oil)"
"PORE_OIL": "Pore Volume (Oil)"
"HCPV_OIL": "Hydro Carbon Pore Volume (Oil)"
"STOIIP_OIL": "Stock Tank Oil Initially Inplace"
"BULK_GAS": "Bulk Volume (Gas)"
"NET_GAS": "Net Volume (Gas)"
"PORV_GAS": "Pore Volume (Gas)"
"HCPV_GAS": "Hydro Carbon Pore Volume (Gas)"
"GIIP_GAS": "Gas Initially in-place"
"RECOVERABLE_OIL": "Recoverable Volume (Oil)"
"RECOVERABLE_GAS": "Recoverable Volume (Gas)"</p>
<ul>
<li><code>csvfile</code>: Aggregated csvfile with 'REAL', 'ENSEMBLE' and 'SOURCE' columns</li>
<li><code>ensembles</code>: Which ensembles in <code>container_settings</code> to visualize.</li>
<li><code>volfiles</code>:  Key/value pair of csv files E.g. (geogrid: geogrid--oil.csv)</li>
<li><code>volfolder</code>: Optional local folder for csv files</li>
<li><code>response</code>: Optional initial visualized volume response</li>
</ul>
<pre><code class='yaml'>  - container: InplaceVolumes
    csvfile: None  # Optional (default value shown here).
    ensembles: None  # Optional (default value shown here).
    volfiles: None  # Optional (default value shown here).
    volfolder: share/results/volumes  # Optional (default value shown here).
    response: STOIIP_OIL  # Optional (default value shown here).
</code></pre>
<hr>


<h3>InplaceVolumesOneByOne</h3>
<p>Visualizes inplace volumetrics related to a FMU ensemble with design matrix.
Input can be given either as aggregated csv files for volumes and sensitivity information,
or as an ensemble name defined in 'container_settings' and volumetric csv files
stored per realizations.</p>
<p>In either case the volumetric csv files must follow FMU standards, that is it must have
one or more of the following columns:
'ZONE', 'REGION', 'FACIES', 'LICENSE' - these columns are used to filter the data.</p>
<p>Remaining columns are seen as volumetric responses. Any names are allowed,
but the following responses are given more descriptive names automatically:
"BULK_OIL": "Bulk Volume (Oil)"
"NET_OIL": "Net Volume (Oil)"
"PORE_OIL": "Pore Volume (Oil)"
"HCPV_OIL": "Hydro Carbon Pore Volume (Oil)"
"STOIIP_OIL": "Stock Tank Oil Initially Inplace"
"BULK_GAS": "Bulk Volume (Gas)"
"NET_GAS": "Net Volume (Gas)"
"PORV_GAS": "Pore Volume (Gas)"
"HCPV_GAS": "Hydro Carbon Pore Volume (Gas)"
"GIIP_GAS": "Gas Initially in-place"
"RECOVERABLE_OIL": "Recoverable Volume (Oil)"
"RECOVERABLE_GAS": "Recoverable Volume (Gas)"</p>
<p>The sensitivity information is extracted automatically if an ensemble is given as input,
as long as 'SENSCASE' and 'SENSNAME' is found in 'parameters.txt'.
If aggregated csv files are given as input a csv file with the following columns are
required: ENSEMBLE,REAL,SENSCASE,SENSNAME,SENSTYPE,RUNPATH</p>
<ul>
<li><code>csvfile_vol</code>: Aggregated csvfile for volumes with 'REAL', 'ENSEMBLE' and 'SOURCE' columns</li>
<li><code>csvfile_reals</code>: Aggregated csvfile for sensitivity information</li>
<li><code>ensembles</code>: Which ensembles in <code>container_settings</code> to visualize.</li>
<li><code>volfiles</code>:  Key/value pair of csv files E.g. {geogrid: geogrid--oil.csv}</li>
<li><code>volfolder</code>: Optional local folder for csv files</li>
<li><code>response</code>: Optional initial visualized volume response</li>
</ul>
<pre><code class='yaml'>  - container: InplaceVolumesOneByOne
    csvfile_vol: None  # Optional (default value shown here).
    csvfile_reals: None  # Optional (default value shown here).
    ensembles: None  # Optional (default value shown here).
    volfiles: None  # Optional (default value shown here).
    volfolder: share/results/volumes  # Optional (default value shown here).
    response: STOIIP_OIL  # Optional (default value shown here).
</code></pre>
<hr>


<h3>Intersect</h3>
<p>This container visualizes surfaces intersected along a well path.
The input are surfaces from a FMU ensemble stored on standardized
format with standardized naming (share/results/maps/name--category.gri)
and a folder of well files stored in RMS well format.</p>
<ul>
<li><code>ensemble</code>: Which ensemble in <code>container_settings</code> to visualize.</li>
<li><code>well_path</code>: File folder with wells in rmswell format</li>
<li><code>surface_cat</code>: Surface category to look for in the file names</li>
<li><code>surface_names</code>: List of surface names to look for in the file names</li>
<li><code>well_suffix</code>:  Optional suffix for well files. Default is .rmswell</li>
</ul>
<pre><code class='yaml'>  - container: Intersect
    ensemble: some value
    well_path: some value
    surface_cat: some value
    surface_names: some value
    well_suffix: .rmswell  # Optional (default value shown here).
</code></pre>
<hr>


<h3>Morris</h3>
<p>This container renders a visualization of the Morris sampling method.
The Morris method can be used to screen parameters for how they
influence model response, both individually and through interaction
effect with other parameters.</p>
<ul>
<li><code>csv_file</code>: Input data</li>
<li><code>title</code>: Optional title for the container.</li>
</ul>
<pre><code class='yaml'>  - container: MorrisPlot
    csv_file: some value
</code></pre>
<hr>


<h3>Parameter correlation</h3>
<p>This container shows parameter correlation using a correlation matrix,
and scatter plot for any given pair of parameters.</p>
<ul>
<li><code>ensembles</code>: Which ensembles in <code>container_settings</code> to visualize.</li>
<li><code>drop_constants</code>: Drop constant parameters</li>
</ul>
<pre><code class='yaml'>  - container: ParameterCorrelation
    ensembles: some value
    drop_constants: True  # Optional (default value shown here).
</code></pre>
<hr>


<h3>ParameterDistribution</h3>
<p>This container shows parameter distributions for FMU ensembles.
Parameters are visualized per ensemble as a histogram, and as a boxplot showing
the parameter ranges for each ensemble.
Input can be given either as an aggregated csv files with parameter information
or as an ensemble name defined in <code>container_settings</code>.</p>
<ul>
<li><code>csvfile</code>: Aggregated csvfile with 'REAL', 'ENSEMBLE' and parameter columns</li>
<li><code>ensembles</code>: Which ensembles in <code>container_settings</code> to visualize.</li>
</ul>
<pre><code class='yaml'>  - container: ParameterDistribution
    csvfile: None  # Optional (default value shown here).
    ensembles: None  # Optional (default value shown here).
</code></pre>
<hr>


<h3>Time series from reservoir simulations</h3>
<ul>
<li><code>ensembles</code>: Which ensembles in <code>container_settings</code> to visualize.</li>
<li><code>column_keys</code>: List of vectors to extract. If not given, all vectors
                 from the simulations will be extracted. Wild card asterisk *
                 can be used.</li>
<li><code>sampling</code>: Time separation between extracted values. Can be e.g. <code>monthly</code>
              or <code>yearly</code>.</li>
<li><code>base_ensembles</code>: List of ensembles to use as base ensemble in delta
                    calculations.</li>
<li><code>delta_ensembles</code>: List of ensembles to be compared with base ensemble.</li>
</ul>
<pre><code class='yaml'>  - container: ReservoirSimulationTimeSeries
    ensembles: some value
    column_keys: None  # Optional (default value shown here).
    sampling: monthly  # Optional (default value shown here).
    base_ensembles: None  # Optional (default value shown here).
    delta_ensembles: None  # Optional (default value shown here).
</code></pre>
<hr>


<h3>ReservoirSimulationTimeSeriesOneByOne</h3>
<p>Visualizes reservoir simulation time series related to a FMU ensemble with design matrix.
Input can be given either as aggregated csv files for smry and sensitivity information,
or as an ensemble name defined in 'container_settings'.</p>
<p>A tornadoplot can be calculated interactively for each date/vector.
The realizations for each sensitivity can be highlighted.</p>
<p>The sensitivity information is extracted automatically if an ensemble is given as input,
as long as 'SENSCASE' and 'SENSNAME' is found in 'parameters.txt'.
If aggregated csv files are given as input a csv file with the following columns are
required: ENSEMBLE,REAL,SENSCASE,SENSNAME,SENSTYPE,RUNPATH</p>
<ul>
<li><code>csvfile_smry</code>: Aggregated csvfile for volumes with 'REAL', 'ENSEMBLE', 'DATE' and vector columns</li>
<li><code>csvfile_reals</code>: Aggregated csvfile for sensitivity information</li>
<li><code>ensembles</code>: Which ensembles in <code>container_settings</code> to visualize.</li>
<li><code>column_keys</code>: List of vectors to extract. If not given, all vectors
                 from the simulations will be extracted. Wild card asterisk *
                 can be used.</li>
<li><code>initial_vector</code>: Initial vector to display</li>
<li><code>sampling</code>: Time separation between extracted values. Can be e.g. <code>monthly</code>
              or <code>yearly</code>.</li>
</ul>
<pre><code class='yaml'>  - container: ReservoirSimulationTimeSeriesOneByOne
    csvfile_smry: None  # Optional (default value shown here).
    csvfile_reals: None  # Optional (default value shown here).
    ensembles: None  # Optional (default value shown here).
    column_keys: None  # Optional (default value shown here).
    initial_vector: None  # Optional (default value shown here).
    sampling: monthly  # Optional (default value shown here).
</code></pre>
<hr>


<h3>SegyViewer</h3>
<p>Inspired by <a href="https://github.com/equinor/segyviewer">SegyViewer for Python</a> this container
visualizes seismic 3D cubes with 3 plots (inline, crossline and zslice).
The plots are linked and updates are done by clicking in the plots.</p>
<ul>
<li><code>segyfiles</code>: List of file paths to segyfiles</li>
<li><code>zunit</code>: z-unit for display</li>
<li><code>colors</code>: List of colors to use</li>
</ul>
<pre><code class='yaml'>  - container: SegyViewer
    segyfiles: some value
    zunit: depth (m)  # Optional (default value shown here).
    colors: None  # Optional (default value shown here).
</code></pre>
<hr>


<h3>Subsurface map</h3>
<p>This container visualizes reservoir grids in a map view, additionally it can
visualize the flow pattern in the simulation output using streamlines.
Input can be either a premade json object or data can be extracted from
a FMU ensemble.</p>
<ul>
<li><code>jsonfile</code>: jsonfile with data.</li>
<li><code>ensemble</code>: Which ensemble in <code>container_settings</code> to visualize.</li>
<li><code>map_value</code>: Which property to show in the map (e.g. <code>PERMX</code>).</li>
<li><code>flow_value</code>: Which property to use for the streamlines animation
  (e.g. <code>FLOWAT</code>).</li>
<li><code>time_step</code>: Which report or time step to use in the simulation output.</li>
<li><code>title</code>: Optional title for the container.</li>
</ul>
<pre><code class='yaml'>  - container: SubsurfaceMap
    jsonfile: None  # Optional (default value shown here).
    ensemble: None  # Optional (default value shown here).
    map_value: None  # Optional (default value shown here).
    flow_value: None  # Optional (default value shown here).
    time_step: None  # Optional (default value shown here).
</code></pre>
<hr>

</div>

</div>
</div>

</body>

</html>